<%- contentFor( 'main')%>

<div class="content container" style="padding:30px;">
  <div class=" col-xs-offset-1 col-xs-9 " style="margin:30px !important;">

<%var many = 0;%>
<%post.forEach((pos)=>{%>
  <%many++;%>
  <div class="panel panel-default">
    <div class="panel-body">
      <div class="pull-left">
        <a>
          <img class="media-object img-circle" src="<%=pos.profilepic%>" width="50px" height="50px" style="margin-right:8px; margin-top:-5px;">
        </a>
        </div>
        <h4>
          <a href="/<%=pos.idofthePerson%>/profile" style="text-decoration:none;">
          <% if (typeof pos.nameofthePerson!== 'undefined' ){%>
            <strong><%=pos.nameofthePerson%></strong>
          <%}else {%>
            <strong><%=pos.usernameoftheperson%></strong>
          <%}%>
            </a> â€“ <small><small>
            <a href="#" style="text-decoration:none; color:grey;">
            <i>
            <i class="fa fa-clock-o" aria-hidden="true">
            <%if (pos.createat < 1000) {%>
              </i> <%=pos.createat%> Miliseconds Ago</i>
            <%}else if (pos.createat > 1000 && pos.createat < 60000){%>
                <%const seconds =Math.floor( pos.createat *0.001);%>
                </i> <%=seconds%> Seconds Ago</i>
            <%}else if (pos.createat > 60000 && pos.createat < 3600000){%>
                <%const min =Math.floor( pos.createat *0.001*0.0166667);%>
                </i> <%=min%> Minutes Ago</i>
            <%}else if (pos.createat > 3600000 && pos.createat < 86400000){%>
                <%const hour =Math.floor( pos.createat *0.001*0.0166667*0.0166667);%>
                </i> <%=hour%> Hour Ago</i>
            <%}else if (pos.createat > 86400000 && pos.createat < 604800000){%>
                <%const day =Math.floor( pos.createat *0.001*0.0166667*0.0166667*0.0416667);%>
                </i> <%=day%> Day Ago</i>
            <%}else if (pos.createat > 604800000 && pos.createat < 2419200000){%>
                <%const week =Math.floor( pos.createat *0.001*0.0166667*0.0166667*0.0416667*0.142857);%>
                </i> <%=week%> Week Ago</i>
            <%}else if (pos.createat > 2419200000 ){%>
                <%const month =Math.floor( pos.createat *0.001*0.0166667*0.0166667*0.0416667*0.0328767*0.230137);%>
                </i> <%=month%> Month Ago</i>
            <%}%>

            </a>
            </small>
            </small>
        </h4>

        <%if (typeof user !== 'undefined' ) {%>
          <%if (user._id.equals(pos.idofthePerson)) {%>
            <span>
              <div class="navbar-right">
                <div class="dropdown">
                  <button class="btn btn-link btn-xs dropdown-toggle" type="button" id="dd1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                  <i class="fa fa-cog" aria-hidden="true"></i>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dd1" style="float: right;">
                  <li><a href="/<%=pos.idofpost%>/<%=pos.category%>/delete"><i class="fa fa-fw fa-trash" aria-hidden="true"></i> Delete</a></li>
                </ul>
              </div>
            </div>
        </span>
      <%}%>
    <%}%>
    <hr>
    <div class="post-content" style="margin-right:58px">
      <div id="" contenteditable="" style="font-size:30px;  max-height: 400px;  overflow: auto;">
        <label style="font-size:25px;"><%=pos.content%></label>
      </div>
      <%if (pos.photos.length > 0) {%>
        <%if (pos.photos.length === 1) {%>
          <img class="<%=many%> img-responsive" style="max-height:800px; width:auto; margin:auto " src="<%=pos.photos[0]%>">
          <script type="text/javascript">
            $(`.<%=many%>`).on('click', () => {
            $(`#a<%=many%>`).modal('show');
            });
          </script>
          <div id="a<%=many%>" class="carousel slide modal fade" style="position:fixed !important; top:120px !important; " data-ride="carousel">
            <div class="">
              <button type="button" id="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <ol class="carousel-indicators">
              <li data-target="#a<%=many%>" data-slide-to="0" class="active"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
              <div class="carousel-item active">
                <img class=" d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[0]%>" alt="First slide">
              </div>
            </div>
          </div>
        <%}%>
        <%if (pos.photos.length === 2) {%>
          <img class="<%=many%> img-responsive" style="max-height:400px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[0]%>">
          <img class="<%=many%> img-responsive" style="max-height:400px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[1]%>">
          <script type="text/javascript">
            $(`.<%=many%>`).on('click', () => {
              $(`#a<%=many%>`).modal('show');
            });
          </script>

          <div id="a<%=many%>" class="carousel slide modal fade" style="position:fixed !important; top:100px !important; " data-ride="carousel">
            <div class="">
              <button type="button" id="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <ol class="carousel-indicators">
              <li data-target="#a<%=many%>" data-slide-to="0" class="active"></li>
              <li data-target="#a<%=many%>" data-slide-to="1"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
              <div class="carousel-item active">
                <img class=" d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[0]%>" alt="First slide">
              </div>
              <div class="carousel-item">
                <img class="a d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[1]%>" alt="Second slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#a<%=many%>" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#a<%=many%>" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        <%}%>
        <%if (pos.photos.length === 3) {%>
          <img class="<%=many%> img-responsive" style="max-height:200px; display:inline; width:auto; margin:5px; " src="<%=pos.photos[0]%>">
          <img class="<%=many%> img-responsive" style="max-height:200px; display:inline; width:auto; margin:5px; " src="<%=pos.photos[1]%>">
          <img class="<%=many%> img-responsive" style="max-height:200px; display:inline; width:auto; margin:5px; " src="<%=pos.photos[2]%>">
          <script type="text/javascript">
            $(`.<%=many%>`).on('click', () => {
              $(`#a<%=many%>`).modal('show');
            });
          </script>

          <div id="a<%=many%>" class="carousel slide modal fade" style="position:fixed !important; top:100px !important; " data-ride="carousel">
            <div class="">
              <button type="button" id="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <ol class="carousel-indicators">
              <li data-target="#a<%=many%>" data-slide-to="0" class="active"></li>
              <li data-target="#a<%=many%>" data-slide-to="1"></li>
              <li data-target="#a<%=many%>" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
              <div class="carousel-item active">
                <img class=" d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[0]%>" alt="First slide">
              </div>
              <div class="carousel-item">
                <img class="a d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[1]%>" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class="a d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[2]%>" alt="Third slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#a<%=many%>" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#a<%=many%>" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        <%}%>
        <%if (pos.photos.length === 4) {%>
          <img class=" <%=many%> img-responsive" style="max-height:200px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[0]%>">
          <img class=" <%=many%> img-responsive" style="max-height:200px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[1]%>">
          <img class=" <%=many%> img-responsive" style="max-height:200px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[2]%>">
          <img class=" <%=many%> img-responsive" style="max-height:200px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[3]%>">
          <script type="text/javascript">
            $(`.<%=many%>`).on('click', () => {
                $(`#a<%=many%>`).modal('show');
            });
          </script>

          <div id="a<%=many%>" class="carousel slide modal fade" style="position:fixed !important; top:100px !important; " data-ride="carousel">
            <div class="">
              <button type="button" id="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <ol class="carousel-indicators">
              <li data-target="#a<%=many%>" data-slide-to="0" class="active"></li>
              <li data-target="#a<%=many%>" data-slide-to="1"></li>
              <li data-target="#a<%=many%>" data-slide-to="2"></li>
              <li data-target="#a<%=many%>" data-slide-to="3"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
              <div class="carousel-item active">
                <img class=" .5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[0]%>" alt="First slide">
              </div>
              <div class="carousel-item">
                <img class=".5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[2]%>" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class=".5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[3]%>" alt="Third slide">
              </div>
              <div class="carousel-item">
                <img class=".5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[1]%>" alt="Fourth slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#a<%=many%>" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#a<%=many%>" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          <%}%>
          <%if (pos.photos.length === 5) {%>
            <img class="<%=many%> img-responsive" style="max-height:150px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[0]%>">
            <img class="a<%=many%> img-responsive" style="max-height:150px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[2]%>">
            <img class="<%=many%> img-responsive" style="max-height:150px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[3]%>">
            <img class="<%=many%> img-responsive" style="max-height:150px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[1]%>">
            <img class="<%=many%> img-responsive" style="max-height:150px; width:auto; display:inline; margin:5px; " src="<%=pos.photos[4]%>">

            <script type="text/javascript">
            $(`.<%=many%>`).on('click', () => {
              $(`#a<%=many%>`).modal('show');
            });
            </script>

            <div id="a<%=many%>" class="carousel slide modal fade" style="position:fixed !important; top:100px !important; " data-ride="carousel">
              <div class="">
                <button type="button" id="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
              </div>
              <ol class="carousel-indicators">
                <li data-target="#a<%=many%>" data-slide-to="0" class="active"></li>
                <li data-target="#a<%=many%>" data-slide-to="1"></li>
                <li data-target="#a<%=many%>" data-slide-to="2"></li>
                <li data-target="#a<%=many%>" data-slide-to="3"></li>
                <li data-target="#a<%=many%>" data-slide-to="4"></li>

              </ol>
              <div class="carousel-inner" role="listbox">
                <div class="carousel-item active">
                <img class=" .5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[0]%>" alt="First slide">
              </div>
              <div class="carousel-item">
                <img class=".5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[2]%>" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class=".5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[3]%>" alt="Third slide">
              </div>
              <div class="carousel-item">
                <img class=".5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[1]%>" alt="Fourth slide">
              </div>
              <div class="carousel-item">
                <img class=".5 d-block img-fluid" style="max-height:550px !important; margin: auto" src="<%=pos.photos[4]%>" alt="Fifth slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#a<%=many%>" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#a<%=many%>" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        <%}%>
      <%}%>
    </div>
    <hr>
    <div>
<%if (typeof user !== 'undefined') {%>
<div class="pull-right btn-group-xs">
  <a class="btn btn-default btn-xs" href="/<%=pos.idofpost%>/<%=user._id%>/reshare"><i class="fa fa-retweet" aria-hidden="true"></i> Reshare</a>
</div>
<%}%>
<div class="pull-left">
<%if (pos.category == 'Everyone') {%>
  <p class="text-muted" style="margin-left:5px; margin-bottom:5px !important;"><i class="fa fa-globe" aria-hidden="true"></i> <strong>Public </strong></p>
<%}else if (pos.category== 'Work') {%>
  <p class="text-muted" style="margin-left:5px; margin-bottom:5px !important;"><i class="fa fa-briefcase" aria-hidden="true"></i> <strong>Work </strong></p>
<%}else if (pos.category== 'Friends') {%>
  <p class="text-muted" style="margin-left:5px; margin-bottom:5px !important;"><i class="fa fa-users" aria-hidden="true"></i> <strong>Friends </strong></p>
<%}%>
</div>
<br>
</div>
<hr>
<%if (pos.comment.length > 0 ) {%>
<div>

<%var counter = 0;%>
<%pos.comment.forEach((commen)=>{%>
  <%counter++;%>
    <div class="post-content" style="border:1px black solid">
      <div class="panel-default">
        <div class="panel-body">
          <div class="pull-left">
            <a href="#">
              <img class="media-object img-circle" src="<%=commen.authorPhoto%>" width="35px" height="35px" style="margin-right:8px; margin-top:-5px; ">
            </a>
            </div>
            <h4 style="display:inline;"><a href="#" style="text-decoration:none; display:inline;"><strong><%=commen.authorName%></strong></a></h4>
            <label style="text-decoration:none; color:grey;">
              <i> --- <i class="fa fa-clock-o" aria-hidden="true"></i>
                <%if (commen.timeCreated < 1000) {%>
                  <%=commen.timeCreated%> Miliseconds Ago
                <%}else if (commen.timeCreated > 1000 && commen.timeCreated < 60000){%>
                  <%const seconds =Math.floor( commen.timeCreated *0.001);%>
                  <%=seconds%> Seconds Ago
                <%}else if (commen.timeCreated > 60000 && commen.timeCreated < 3600000){%>
                  <%const min =Math.floor( commen.timeCreated *0.001*0.0166667);%>
                  <%=min%> Minutes Ago
                <%}else if (commen.timeCreated > 3600000 && commen.timeCreated < 86400000){%>
                  <%const hour =Math.floor( commen.timeCreated *0.001*0.0166667*0.0166667);%>
                  <%=hour%> Hour Ago
                <%}else if (commen.timeCreated > 86400000 && commen.timeCreated < 604800000){%>
                  <%const day =Math.floor( commen.timeCreated *0.001*0.0166667*0.0166667*0.0416667);%>
                  <%=day%> Day Ago
                <%}else if (commen.timeCreated > 604800000 && commen.timeCreated < 2419200000){%>
                  <%const week =Math.floor( commen.timeCreated *0.001*0.0166667*0.0166667*0.0416667*0.142857);%>
                  <%=week%> Week Ago
                <%}else if (commen.timeCreated > 2419200000 ){%>
                  <%const month =Math.floor( commen.timeCreated *0.001*0.0166667*0.0166667*0.0416667*0.0328767*0.230137);%>
                  <%=month%> Month Ago
                  <%}%>
                </i>
              </label>
              <hr>
              <div class="post-content">
                <%=commen.content%>
              </div>
            </div>
          </div>
        </div>
        <hr>

    <%});%>
  </div>
<%}%>
<div id="picGoesCom" style="margin:10px;">
</div>
<div class="media row">
<%if (typeof user !== 'undefined') {%>


    <div class="pull-left" style="margin-left:15px !important;">
        <form class="" action="/<%=pos.idofpost%>/comment" method="post">
            <a href="/<%=user._id%>/profile">
            <img class="media-object img-circle" src="<%=user.profilepic%>" width="35px" height="35px" style="margin-left:3px; margin-right:-5px;">
            </a>
    </div>

    <div class="media-body col-xs-12">

        <div class=" col-xs-9 " style="display:inline;">
            <textarea class="form-control " rows="1" placeholder="Comment" name="content" style="display:inline;"></textarea>

        </div>
        <label id="commentpiclabel" for="commentpic" class="  s3-btn2" style="padding:5px; margin-left:5px; color:black; display:inline; float:left;"><input type="file" name="imgcomment" id="commentpic" style="  display:none; width:auto; height:auto;" ><i class="fa fa-camera" aria-hidden="true"></i></label >
            <button class="s3-btn4" style="padding:5px; color:black; margin-left:5px; display:inline; float:left;" type='submit'>Post</button>


            </form>
        </div>
    <%}%>
</div>
</div>
</div>
<%});%>
</div>
</div>
